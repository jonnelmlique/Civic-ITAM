// PLEASE INCLUDE ALL THE QUERIES YOU ADD TO THE DATABASE HERE

CREATE DATABASE civicitam;

FOR EXAMPLE (ADD COMMENT IF NECESSARY)

//used for user page

CREATE TABLE employees (
    id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    username VARCHAR(100) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(100) NOT NULL,
    contactnumber VARCHAR(15) NOT NULL,
    department VARCHAR(100) NOT NULL,
    role VARCHAR(100) NOT NULL,
    status VARCHAR(100) NOT NULL
);

//not ffinal
CREATE TABLE pcassets (
    id INT AUTO_INCREMENT PRIMARY KEY, 
    pc_id VARCHAR(255) NOT NULL UNIQUE,
    cpu_model VARCHAR(255) NOT NULL,
    cpu_hertz VARCHAR(255)NOT NULL, 
    cpu_health VARCHAR(255) NOT NULL, 
    hdd_model VARCHAR(255) NOT NULL, 
    hdd_size VARCHAR(255) NOT NULL, 
    hdd_health VARCHAR(255) NOT NULL, 
    ram_size VARCHAR(255) NOT NULL,
    ram_health VARCHAR(255) NOT NULL,
    os_version VARCHAR(255) NOT NULL, 
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    assignedpc VARCHAR(255) NULL
);
CREATE TABLE tickets (
    ticketid INT AUTO_INCREMENT PRIMARY KEY, 
    subject VARCHAR(255) NOT NULL,         
    description TEXT NOT NULL,              
    category VARCHAR(255) NOT NULL,          
    status VARCHAR(255) DEFAULT 'Open',      
    createdby VARCHAR(255) NOT NULL,                
    assignedto VARCHAR(255) NULL,            
    lastupdated TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP 
);

CREATE TABLE maintenance_requests (
    request_id INT AUTO_INCREMENT PRIMARY KEY,
    maintenance_name VARCHAR(255) NOT NULL,
    category VARCHAR(100) NOT NULL,
    status VARCHAR(50) NOT NULL DEFAULT 'Pending',
    assigned_to VARCHAR(255) DEFAULT NULL,
    remarks TEXT DEFAULT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE overdue_assets (
    id INT AUTO_INCREMENT PRIMARY KEY,
    asset_name VARCHAR(255) NOT NULL,
    category VARCHAR(100) NOT NULL,
    assigned_to VARCHAR(255) NOT NULL,
    due_date DATE NOT NULL,
    status VARCHAR(50) NOT NULL DEFAULT 'overdue',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);



CREATE TABLE assetrequests (
    requestid INT AUTO_INCREMENT PRIMARY KEY,    
    assetid INT NOT NULL,                         
    assetname VARCHAR(255) NOT NULL,            
    category VARCHAR(255) NOT NULL,               
    reason TEXT NOT NULL,                         
    status VARCHAR(255) DEFAULT 'Pending',
    createddate TIMESTAMP DEFAULT CURRENT_TIMESTAMP, 
    requestedby VARCHAR(255) NOT NULL,     
    FOREIGN KEY (assetid) REFERENCES assetdetails(id)         
);
    lastmodifieddate TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP


//Not final and subject to change based on what is needed
//pwede nyo palitan
//this table is based on this 
https://docs.google.com/spreadsheets/d/1PK7PUsHtfrw7iIUXcB5UD7wWL64bLVc652pDSfj4iNM/edit?gid=354465904#gid=354465904

CREATE TABLE assetdetails (
    id INT PRIMARY KEY AUTO_INCREMENT,
    assetcode VARCHAR(255) NOT NULL, 
    itemid INT NOT NULL, 
    assetname VARCHAR(255) NOT NULL, 
    description TEXT, 
    itemtype VARCHAR(255) NOT NULL, 
    serialnumber VARCHAR(255), 
    supplier VARCHAR(255) NOT NULL, 
    purchasedate DATE NOT NULL, 
    invoicenumber VARCHAR(255) NOT NULL,
    amount DECIMAL(10, 2) NOT NULL,
    warranty VARCHAR(255) NOT NULL,
    category VARCHAR(255) NOT NULL,
    status VARCHAR(255) NOT NULL,
    location VARCHAR(255) NOT NULL,
    stock INT NOT NULL,
    lifespan INT NOT NULL,
    createDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    createdby VARCHAR(255) NOT NULL,
);

CREATE TABLE assetconsignment (
    id INT PRIMARY KEY AUTO_INCREMENT,
    reference VARCHAR(100),
    consignmentId INT,
    assetdetailsid INT,
    FOREIGN KEY (assetdetailsid) REFERENCES assetdetails(id)
);

CREATE TABLE diagnostichistory (
    id INT PRIMARY KEY AUTO_INCREMENT,
    assetdetailsid INT,
    job VARCHAR(255),
    jobtype VARCHAR(50),
    conductedby VARCHAR(100),
    jobdate DATE,
    cost DECIMAL(10, 2),
    createdate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    createdby VARCHAR(100),
    FOREIGN KEY (assetdetailsid) REFERENCES assetdetails(Id)
);

CREATE TABLE assetconsignmenthistory (
    id INT PRIMARY KEY AUTO_INCREMENT,
    employeeid INT,
    name VARCHAR(100),
    remarks TEXT,
    issueddate DATE,
    createdate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    createdby VARCHAR(100)
);

ALTER TABLE `diagnostichistory`
	ADD COLUMN `diagnosticid` VARCHAR(100) NULL DEFAULT NULL AFTER `id`,
	ADD COLUMN `remarks` VARCHAR(255) NULL DEFAULT NULL AFTER `assetdetailsid`,
	ADD COLUMN `status` VARCHAR(100) NULL DEFAULT NULL AFTER `createdby`;






// FOR EMPLOYEES LOCK ACCOUNT
ALTER TABLE employees
ADD failed_attempts INT DEFAULT 0,
ADD lock_time INT DEFAULT NULL;
